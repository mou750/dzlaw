"use strict";(self.webpackChunkalgerian_law_manager=self.webpackChunkalgerian_law_manager||[]).push([[684],{37684:(e,s,a)=>{a.r(s),a.d(s,{default:()=>J});var l=a(89379),t=a(9950),r=a(14857),c=a(57191),n=a(16491),i=a(82053),o=a(60899),d=a(48089),h=a(50704),x=a(25979),m=a(3788),u=a(16101),A=a(23266),j=a(55660),g=a(25333),y=a(93125),v=a(39919),p=a(25277),f=a(2235),b=a(33174),w=a(249),z=a(26050),S=a(14195),C=a(83563),T=a(49715),F=a(31902),H=a(65471),I=a(44414);const D=(0,H.A)((0,I.jsx)("path",{d:"M14.67 5v6.5H9.33V5zm1 6.5H21V5h-5.33zm-1 7.5v-6.5H9.33V19zm1-6.5V19H21v-6.5zm-7.34 0H3V19h5.33zm0-1V5H3v6.5z"}),"ViewModule"),V=(0,H.A)((0,I.jsx)("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList");var W=a(76299),k=a(39606),M=a(81831),O=a(94558),B=a(67818),R=a(28429),L=a(387),_=a(8079),E=a(18078);const J=function(){const{t:e}=(0,B.Bd)(),s=(0,R.Zp)(),a=(0,r.A)(),{categories:H,searchActions:J,searchResults:N,loading:P}=(0,L.Us)(),[U,Z]=(0,t.useState)(""),[$,q]=(0,t.useState)({category:"",status:"",dateFrom:null,dateTo:null}),[G,K]=(0,t.useState)("relevance"),[Q,X]=(0,t.useState)("grid"),[Y,ee]=(0,t.useState)([]),[se]=(0,t.useState)(["search.example1","search.example2","search.example3","search.example4","search.example5"]);(0,t.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("searchHistory")||"[]");ee(e.slice(0,10))},[]),(0,t.useEffect)(()=>{(U||Object.values($).some(e=>e))&&ae()},[U,$,G]);const ae=async()=>{try{var e,s;const a=(0,l.A)((0,l.A)({},$),{},{dateFrom:null===(e=$.dateFrom)||void 0===e?void 0:e.toISOString(),dateTo:null===(s=$.dateTo)||void 0===s?void 0:s.toISOString()});if(await J.searchLaws(U,a),U.trim()){const e=[U,...Y.filter(e=>e!==U)].slice(0,10);ee(e),localStorage.setItem("searchHistory",JSON.stringify(e))}}catch(a){console.error("Search error:",a)}},le=(e,s)=>{q(a=>(0,l.A)((0,l.A)({},a),{},{[e]:s}))},te=t.useMemo(()=>{if(!N)return[];const e=[...N];switch(G){case"date":return e.sort((e,s)=>new Date(s.issueDate)-new Date(e.issueDate));case"title":return e.sort((e,s)=>e.title.localeCompare(s.title));case"category":return e.sort((e,s)=>e.category.localeCompare(s.category));default:return e}},[N,G]),re=U||Object.values($).some(e=>e);return(0,I.jsx)(M.$,{dateAdapter:O.h,children:(0,I.jsx)(c.A,{in:!0,timeout:500,children:(0,I.jsxs)(n.A,{children:[(0,I.jsxs)(n.A,{sx:{mb:4},children:[(0,I.jsxs)(i.A,{variant:"h4",sx:{fontWeight:700,color:a.palette.primary.main,display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,I.jsx)(T.A,{fontSize:"large"}),e("search.title")]}),(0,I.jsx)(i.A,{variant:"h6",color:"text.secondary",children:e("search.subtitle")})]}),(0,I.jsxs)(o.Ay,{container:!0,spacing:3,children:[(0,I.jsx)(o.Ay,{item:!0,xs:12,children:(0,I.jsx)(d.A,{sx:{mb:3},children:(0,I.jsxs)(h.A,{children:[(0,I.jsx)(n.A,{sx:{mb:3},children:(0,I.jsx)(_.A,{value:U,onChange:Z,placeholder:e("search.placeholder"),onSearch:ae,size:"large"})}),(0,I.jsxs)(o.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,I.jsx)(o.Ay,{item:!0,xs:12,md:3,children:(0,I.jsxs)(x.A,{fullWidth:!0,size:"small",children:[(0,I.jsx)(m.A,{children:e("laws.fields.category")}),(0,I.jsxs)(u.A,{value:$.category,onChange:e=>le("category",e.target.value),label:e("laws.fields.category"),children:[(0,I.jsx)(A.A,{value:"",children:(0,I.jsx)("em",{children:e("common.all")})}),null===H||void 0===H?void 0:H.map(e=>(0,I.jsx)(A.A,{value:e.name,children:e.name},e.id))]})]})}),(0,I.jsx)(o.Ay,{item:!0,xs:12,md:2,children:(0,I.jsxs)(x.A,{fullWidth:!0,size:"small",children:[(0,I.jsx)(m.A,{children:e("laws.fields.status")}),(0,I.jsxs)(u.A,{value:$.status,onChange:e=>le("status",e.target.value),label:e("laws.fields.status"),children:[(0,I.jsx)(A.A,{value:"",children:(0,I.jsx)("em",{children:e("common.all")})}),(0,I.jsx)(A.A,{value:"active",children:e("laws.status.active")}),(0,I.jsx)(A.A,{value:"inactive",children:e("laws.status.inactive")}),(0,I.jsx)(A.A,{value:"draft",children:e("laws.status.draft")}),(0,I.jsx)(A.A,{value:"archived",children:e("laws.status.archived")})]})]})}),(0,I.jsx)(o.Ay,{item:!0,xs:12,md:2,children:(0,I.jsx)(k.l,{label:e("search.dateFrom"),value:$.dateFrom,onChange:e=>le("dateFrom",e),renderInput:e=>(0,I.jsx)(TextField,(0,l.A)((0,l.A)({},e),{},{size:"small",fullWidth:!0}))})}),(0,I.jsx)(o.Ay,{item:!0,xs:12,md:2,children:(0,I.jsx)(k.l,{label:e("search.dateTo"),value:$.dateTo,onChange:e=>le("dateTo",e),renderInput:e=>(0,I.jsx)(TextField,(0,l.A)((0,l.A)({},e),{},{size:"small",fullWidth:!0}))})}),(0,I.jsx)(o.Ay,{item:!0,xs:12,md:3,children:(0,I.jsxs)(n.A,{sx:{display:"flex",gap:1,alignItems:"center"},children:[(0,I.jsx)(j.A,{title:e("common.clearFilters"),children:(0,I.jsx)(g.A,{onClick:()=>{q({category:"",status:"",dateFrom:null,dateTo:null}),Z(""),J.clearSearchResults()},disabled:!re,color:"primary",children:(0,I.jsx)(F.A,{})})}),(0,I.jsxs)(y.A,{value:Q,exclusive:!0,onChange:(e,s)=>{null!==s&&X(s)},size:"small",children:[(0,I.jsx)(v.A,{value:"grid",children:(0,I.jsx)(D,{})}),(0,I.jsx)(v.A,{value:"list",children:(0,I.jsx)(V,{})})]})]})})]}),re&&(0,I.jsxs)(n.A,{sx:{mt:2,display:"flex",gap:1,flexWrap:"wrap"},children:[U&&(0,I.jsx)(p.A,{label:"".concat(e("search.title"),": ").concat(U),onDelete:()=>Z(""),color:"primary",size:"small"}),$.category&&(0,I.jsx)(p.A,{label:"".concat(e("laws.fields.category"),": ").concat($.category),onDelete:()=>le("category",""),color:"secondary",size:"small"}),$.status&&(0,I.jsx)(p.A,{label:"".concat(e("laws.fields.status"),": ").concat(e("laws.status.".concat($.status))),onDelete:()=>le("status",""),color:"info",size:"small"}),$.dateFrom&&(0,I.jsx)(p.A,{label:"".concat(e("search.dateFrom"),": ").concat($.dateFrom.toLocaleDateString()),onDelete:()=>le("dateFrom",null),color:"warning",size:"small"}),$.dateTo&&(0,I.jsx)(p.A,{label:"".concat(e("search.dateTo"),": ").concat($.dateTo.toLocaleDateString()),onDelete:()=>le("dateTo",null),color:"warning",size:"small"})]})]})})}),(0,I.jsxs)(o.Ay,{item:!0,xs:12,lg:9,children:[N&&N.length>0&&(0,I.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[(0,I.jsx)(i.A,{variant:"body1",color:"text.secondary",children:e("search.resultsCount",{count:N.length})}),(0,I.jsxs)(y.A,{value:G,exclusive:!0,onChange:(e,s)=>{null!==s&&K(s)},size:"small",children:[(0,I.jsx)(v.A,{value:"relevance",children:e("search.sortBy.relevance")}),(0,I.jsx)(v.A,{value:"date",children:e("search.sortBy.date")}),(0,I.jsx)(v.A,{value:"title",children:e("search.sortBy.title")}),(0,I.jsx)(v.A,{value:"category",children:e("search.sortBy.category")})]})]}),re?N&&N.length>0?(0,I.jsx)(E.A,{laws:te,loading:P,onView:e=>{s("/laws/view/".concat(e.id))},onEdit:e=>{s("/laws/edit/".concat(e.id))},onDelete:e=>{}}):P?(0,I.jsx)(f.A,{sx:{p:4,textAlign:"center"},children:(0,I.jsx)(i.A,{variant:"body1",color:"text.secondary",children:e("common.loading")})}):(0,I.jsx)(b.A,{severity:"info",sx:{mb:3},children:e("search.noResults")}):(0,I.jsxs)(f.A,{sx:{p:4,textAlign:"center"},children:[(0,I.jsx)(T.A,{sx:{fontSize:80,color:a.palette.grey[400],mb:2}}),(0,I.jsx)(i.A,{variant:"h5",color:"text.secondary",sx:{mb:1},children:e("search.startSearching")}),(0,I.jsx)(i.A,{variant:"body1",color:"text.secondary",children:e("search.searchInstructions")})]})]}),(0,I.jsxs)(o.Ay,{item:!0,xs:12,lg:3,children:[(0,I.jsx)(d.A,{sx:{mb:3},children:(0,I.jsxs)(h.A,{children:[(0,I.jsxs)(i.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[(0,I.jsx)(W.A,{}),e("search.popularSearches")]}),(0,I.jsx)(w.A,{dense:!0,children:se.map((s,a)=>(0,I.jsxs)(z.Ay,{button:!0,onClick:()=>(e=>{Z(e)})(s),sx:{borderRadius:2,mb:.5},children:[(0,I.jsx)(S.A,{sx:{minWidth:35},children:(0,I.jsx)(W.A,{color:"success",fontSize:"small"})}),(0,I.jsx)(C.A,{primary:e(s),primaryTypographyProps:{fontSize:"0.9rem"}})]},a))})]})}),Y.length>0&&(0,I.jsx)(d.A,{children:(0,I.jsxs)(h.A,{children:[(0,I.jsxs)(i.A,{variant:"h6",sx:{mb:2,display:"flex",alignItems:"center",gap:1},children:[(0,I.jsx)(T.A,{}),e("search.recentSearches")]}),(0,I.jsx)(w.A,{dense:!0,children:Y.map((e,s)=>(0,I.jsxs)(z.Ay,{button:!0,onClick:()=>(e=>{Z(e)})(e),sx:{borderRadius:2,mb:.5},children:[(0,I.jsx)(S.A,{sx:{minWidth:35},children:(0,I.jsx)(T.A,{color:"action",fontSize:"small"})}),(0,I.jsx)(C.A,{primary:e,primaryTypographyProps:{fontSize:"0.9rem"}})]},s))})]})})]})]})]})})})}}}]);