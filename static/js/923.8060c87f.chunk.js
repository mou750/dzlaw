"use strict";(self.webpackChunkalgerian_law_manager=self.webpackChunkalgerian_law_manager||[]).push([[923],{923:(e,t,s)=>{s.r(t),s.d(t,{default:()=>J});var n=s(89379),r=s(9950),a=s(28429),i=s(14857),o=s(57191),l=s(16491),c=s(82053),d=s(10226),h=s(48089),x=s(50704),m=s(60899),g=s(25277),p=s(33174),A=s(41413),u=s(25333),j=s(17239),y=s(23266),v=s(96583),f=s(40033),b=s(28170),w=s(79739),C=s(98785),S=s(71471),k=s(53256),z=s(76281),I=s(40379),E=s(20760),L=s(67818),W=s(387),H=s(29925),M=s(25979),P=s(3788),F=s(16101),T=s(2235),D=s(14801),O=s(58629),N=s(41300),R=s(72934),V=s(49885),B=s(44414);const U=["#1976d2","#d32f2f","#388e3c","#f57c00","#7b1fa2","#5d4037","#455a64","#00796b","#c2185b","#8bc34a","#ff9800","#9c27b0"],q=["category","gavel","business","balance","work","receipt","home","security","description"];const _=function(){const{t:e,i18n:t}=(0,L.Bd)(),s=(0,a.Zp)(),{id:g}=(0,a.g)(),j=(0,i.A)(),{categories:v,categoryActions:f}=(0,W.Us)(),b=Boolean(g),[w,k]=(0,r.useState)({name:"",nameEn:"",nameFr:"",description:"",color:U[0],icon:q[0],parentId:null}),[z,I]=(0,r.useState)({}),[E,_]=(0,r.useState)(!1),[Z,J]=(0,r.useState)({open:!1,message:"",severity:"success"});(0,r.useEffect)(()=>{b&&g&&Y()},[b,g]);const Y=async()=>{try{const e=null===v||void 0===v?void 0:v.find(e=>e.id===parseInt(g));e&&k({name:e.name||"",nameEn:e.nameEn||"",nameFr:e.nameFr||"",description:e.description||"",color:e.color||U[0],icon:e.icon||q[0],parentId:e.parentId||null})}catch(t){J({open:!0,message:e("messages.networkError"),severity:"error"})}},G=(e,t)=>{k(s=>(0,n.A)((0,n.A)({},s),{},{[e]:t})),z[e]&&I(t=>(0,n.A)((0,n.A)({},t),{},{[e]:""}))},K=()=>{s("/categories")},Q=()=>{J((0,n.A)((0,n.A)({},Z),{},{open:!1}))};return(0,B.jsx)(o.A,{in:!0,timeout:500,children:(0,B.jsxs)(l.A,{children:[(0,B.jsx)(l.A,{sx:{mb:4},children:(0,B.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,B.jsx)(u.A,{onClick:K,sx:{mr:"ar"===t.language?0:2,ml:"ar"===t.language?2:0},children:(0,B.jsx)(D.A,{})}),(0,B.jsxs)(c.A,{variant:"h4",sx:{fontWeight:700,color:j.palette.primary.main,display:"flex",alignItems:"center",gap:2},children:[(0,B.jsx)(S.A,{fontSize:"large"}),e(b?"categories.edit":"categories.addNew")]})]})}),(0,B.jsx)("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const t={};return w.name.trim()||(t.name=e("validation.required")),(null===v||void 0===v?void 0:v.find(e=>e.name.toLowerCase()===w.name.toLowerCase()&&(!b||e.id!==parseInt(g))))&&(t.name=e("validation.categoryExists")),I(t),0===Object.keys(t).length})()){_(!0);try{const t=(0,n.A)((0,n.A)({},w),{},{name:w.name.trim(),nameEn:w.nameEn.trim(),nameFr:w.nameFr.trim(),description:w.description.trim()});b?(await f.updateCategory(parseInt(g),t),J({open:!0,message:e("messages.categoryUpdated"),severity:"success"})):(await f.addCategory(t),J({open:!0,message:e("messages.categoryAdded"),severity:"success"})),setTimeout(()=>{s("/categories")},1500)}catch(r){J({open:!0,message:e("messages.networkError"),severity:"error"})}finally{_(!1)}}},children:(0,B.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,B.jsx)(m.Ay,{item:!0,xs:12,lg:8,children:(0,B.jsx)(h.A,{sx:{mb:3},children:(0,B.jsxs)(x.A,{children:[(0,B.jsxs)(c.A,{variant:"h6",sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[(0,B.jsx)(O.A,{}),e("categories.basicInfo")]}),(0,B.jsxs)(m.Ay,{container:!0,spacing:3,children:[(0,B.jsx)(m.Ay,{item:!0,xs:12,children:(0,B.jsx)(H.A,{fullWidth:!0,label:e("categories.fields.name")+" ("+e("settings.languages.ar")+")",value:w.name,onChange:e=>G("name",e.target.value),error:Boolean(z.name),helperText:z.name,required:!0,sx:{mb:2}})}),(0,B.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,B.jsx)(H.A,{fullWidth:!0,label:e("categories.fields.name")+" ("+e("settings.languages.en")+")",value:w.nameEn,onChange:e=>G("nameEn",e.target.value),placeholder:"Category Name in English"})}),(0,B.jsx)(m.Ay,{item:!0,xs:12,md:6,children:(0,B.jsx)(H.A,{fullWidth:!0,label:e("categories.fields.name")+" ("+e("settings.languages.fr")+")",value:w.nameFr,onChange:e=>G("nameFr",e.target.value),placeholder:"Nom de cat\xe9gorie en fran\xe7ais"})}),(0,B.jsx)(m.Ay,{item:!0,xs:12,children:(0,B.jsx)(H.A,{fullWidth:!0,label:e("categories.fields.description"),value:w.description,onChange:e=>G("description",e.target.value),multiline:!0,rows:4,placeholder:e("categories.descriptionPlaceholder")})}),(0,B.jsx)(m.Ay,{item:!0,xs:12,children:(0,B.jsxs)(M.A,{fullWidth:!0,children:[(0,B.jsx)(P.A,{children:e("categories.fields.parentCategory")}),(0,B.jsxs)(F.A,{value:w.parentId||"",onChange:e=>G("parentId",e.target.value||null),label:e("categories.fields.parentCategory"),children:[(0,B.jsx)(y.A,{value:"",children:(0,B.jsx)("em",{children:e("categories.noParent")})}),((null===v||void 0===v?void 0:v.filter(e=>!b||e.id!==parseInt(g)))||[]).map(e=>(0,B.jsx)(y.A,{value:e.id,children:e.name},e.id))]})]})})]})]})})}),(0,B.jsxs)(m.Ay,{item:!0,xs:12,lg:4,children:[(0,B.jsx)(h.A,{sx:{mb:3},children:(0,B.jsxs)(x.A,{children:[(0,B.jsxs)(c.A,{variant:"h6",sx:{mb:3,display:"flex",alignItems:"center",gap:1},children:[(0,B.jsx)(N.A,{}),e("categories.visualSettings")]}),(0,B.jsxs)(l.A,{sx:{textAlign:"center",mb:3},children:[(0,B.jsx)(A.A,{sx:{width:80,height:80,backgroundColor:w.color,mx:"auto",mb:2,fontSize:"2rem"},children:(0,B.jsx)(S.A,{})}),(0,B.jsx)(c.A,{variant:"h6",sx:{color:w.color,fontWeight:600},children:w.name||e("categories.preview")}),w.description&&(0,B.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:[w.description.substring(0,50),"..."]})]}),(0,B.jsxs)(l.A,{sx:{mb:3},children:[(0,B.jsx)(c.A,{variant:"subtitle2",sx:{mb:2},children:e("categories.selectColor")}),(0,B.jsx)(m.Ay,{container:!0,spacing:1,children:U.map((e,t)=>(0,B.jsx)(m.Ay,{item:!0,xs:3,children:(0,B.jsx)(l.A,{onClick:()=>G("color",e),sx:{width:"100%",height:40,backgroundColor:e,borderRadius:2,cursor:"pointer",border:w.color===e?"3px solid #000":"1px solid #ddd",transition:"all 0.2s ease","&:hover":{transform:"scale(1.1)",boxShadow:j.shadows[4]}}})},t))})]}),(0,B.jsx)(l.A,{sx:{mb:3},children:(0,B.jsx)(H.A,{fullWidth:!0,label:e("categories.customColor"),type:"color",value:w.color,onChange:e=>G("color",e.target.value),InputProps:{sx:{height:56}}})}),(0,B.jsxs)(l.A,{children:[(0,B.jsx)(c.A,{variant:"subtitle2",sx:{mb:2},children:e("categories.selectIcon")}),(0,B.jsxs)(M.A,{fullWidth:!0,children:[(0,B.jsx)(P.A,{children:e("categories.selectIcon")}),(0,B.jsx)(F.A,{value:w.icon,onChange:e=>G("icon",e.target.value),label:e("categories.selectIcon"),children:q.map(t=>(0,B.jsx)(y.A,{value:t,children:e("categories.icons.".concat(t))},t))})]})]})]})}),(0,B.jsx)(T.A,{sx:{p:3},children:(0,B.jsxs)(l.A,{sx:{display:"flex",gap:2,flexDirection:"column"},children:[(0,B.jsx)(d.A,{type:"submit",variant:"contained",size:"large",startIcon:(0,B.jsx)(R.A,{}),disabled:E,sx:{py:1.5,fontWeight:600,background:"linear-gradient(45deg, ".concat(j.palette.secondary.main," 30%, ").concat(j.palette.secondary.light," 90%)")},children:e(E?"common.saving":"common.save")}),(0,B.jsx)(d.A,{variant:"outlined",size:"large",startIcon:(0,B.jsx)(V.A,{}),onClick:K,disabled:E,sx:{py:1.5},children:e("common.cancel")})]})})]})]})}),(0,B.jsx)(C.A,{open:Z.open,autoHideDuration:6e3,onClose:Q,anchorOrigin:{vertical:"bottom",horizontal:"ar"===t.language?"left":"right"},children:(0,B.jsx)(p.A,{onClose:Q,severity:Z.severity,sx:{width:"100%"},children:Z.message})})]})})};var Z=s(8079);const J=function(){const{t:e,i18n:t}=(0,L.Bd)(),s=(0,a.Zp)(),H=(0,a.zy)(),M=(0,i.A)(),{categories:P,laws:F,loading:T,error:D,categoryActions:O,generalActions:N}=(0,W.Us)(),[R,V]=(0,r.useState)(""),[U,q]=(0,r.useState)([]),[J,Y]=(0,r.useState)(!1),[G,K]=(0,r.useState)(null),[Q,X]=(0,r.useState)({open:!1,message:"",severity:"success"}),[$,ee]=(0,r.useState)(null),[te,se]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=P||[];R&&(e=e.filter(e=>e.name.toLowerCase().includes(R.toLowerCase())||e.description&&e.description.toLowerCase().includes(R.toLowerCase()))),q(e)},[P,R]);const ne=e=>(null===F||void 0===F?void 0:F.filter(t=>t.category===e).length)||0,re=()=>{s("/categories/add")},ae=e=>{s("/categories/edit/".concat(e.id))},ie=()=>{ee(null),se(null)},oe=e=>{if(te)switch(e){case"edit":ae(te);break;case"delete":K(te),Y(!0)}ie()},le=()=>{X((0,n.A)((0,n.A)({},Q),{},{open:!1}))};return"/categories"!==H.pathname&&"/categories/"!==H.pathname?(0,B.jsxs)(a.BV,{children:[(0,B.jsx)(a.qh,{path:"add",element:(0,B.jsx)(_,{})}),(0,B.jsx)(a.qh,{path:"edit/:id",element:(0,B.jsx)(_,{})})]}):(0,B.jsx)(o.A,{in:!0,timeout:500,children:(0,B.jsxs)(l.A,{children:[(0,B.jsxs)(l.A,{sx:{mb:4},children:[(0,B.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,B.jsxs)(c.A,{variant:"h4",sx:{fontWeight:700,color:M.palette.primary.main,display:"flex",alignItems:"center",gap:2},children:[(0,B.jsx)(S.A,{fontSize:"large"}),e("navigation.categories")]}),(0,B.jsx)(d.A,{variant:"contained",startIcon:(0,B.jsx)(k.A,{}),onClick:re,sx:{borderRadius:3,px:3,py:1.5,fontWeight:600,textTransform:"none",background:"linear-gradient(45deg, ".concat(M.palette.secondary.main," 30%, ").concat(M.palette.secondary.light," 90%)"),color:"white",boxShadow:M.shadows[4],"&:hover":{boxShadow:M.shadows[8],transform:"translateY(-2px)"}},children:e("categories.add")})]}),(0,B.jsx)(h.A,{sx:{mb:3},children:(0,B.jsx)(x.A,{children:(0,B.jsxs)(m.Ay,{container:!0,spacing:3,alignItems:"center",children:[(0,B.jsx)(m.Ay,{item:!0,xs:12,md:8,children:(0,B.jsx)(Z.A,{value:R,onChange:V,placeholder:e("categories.searchPlaceholder"),showSuggestions:!1})}),(0,B.jsx)(m.Ay,{item:!0,xs:12,md:4,children:(0,B.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,B.jsxs)(c.A,{variant:"body1",color:"text.secondary",children:[e("common.showing")," ",U.length," ",e("common.of")," ",(null===P||void 0===P?void 0:P.length)||0]}),R&&(0,B.jsx)(g.A,{label:"".concat(e("search.title"),": ").concat(R),onDelete:()=>V(""),size:"small",color:"primary"})]})})]})})})]}),D&&(0,B.jsx)(p.A,{severity:"error",sx:{mb:3},children:D}),0===U.length?(0,B.jsxs)(l.A,{sx:{textAlign:"center",py:8,px:3},children:[(0,B.jsx)(S.A,{sx:{fontSize:80,color:M.palette.grey[400],mb:2}}),(0,B.jsx)(c.A,{variant:"h5",color:"text.secondary",sx:{mb:1},children:e(R?"search.noResults":"categories.noCategories")}),(0,B.jsx)(c.A,{variant:"body1",color:"text.secondary",sx:{mb:3},children:e(R?"categories.tryDifferentSearch":"categories.addFirstCategory")}),!R&&(0,B.jsx)(d.A,{variant:"contained",startIcon:(0,B.jsx)(k.A,{}),onClick:re,children:e("categories.add")})]}):(0,B.jsx)(m.Ay,{container:!0,spacing:3,children:U.map((s,n)=>(0,B.jsx)(m.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,B.jsx)(o.A,{in:!0,timeout:300+100*n,children:(0,B.jsxs)(h.A,{sx:{height:"100%",display:"flex",flexDirection:"column",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:M.shadows[8],"& .category-actions":{opacity:1}},border:"2px solid ".concat(s.color||M.palette.primary.main,"20"),borderRadius:3,position:"relative",overflow:"hidden"},onClick:()=>ae(s),children:[(0,B.jsx)(l.A,{sx:{height:6,background:"linear-gradient(90deg, ".concat(s.color||M.palette.primary.main," 0%, ").concat(s.color||M.palette.primary.main,"80 100%)")}}),(0,B.jsxs)(x.A,{sx:{flexGrow:1,p:3},children:[(0,B.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[(0,B.jsx)(A.A,{sx:{width:50,height:50,backgroundColor:s.color||M.palette.primary.main,fontSize:"1.5rem"},children:(0,B.jsx)(S.A,{})}),(0,B.jsx)(u.A,{className:"category-actions",onClick:e=>((e,t)=>{e.stopPropagation(),ee(e.currentTarget),se(t)})(e,s),sx:{opacity:0,transition:"opacity 0.2s ease"},children:(0,B.jsx)(z.A,{})})]}),(0,B.jsx)(c.A,{variant:"h6",sx:{fontWeight:600,mb:1,lineHeight:1.3,color:s.color||M.palette.primary.main},children:s.name}),s.description&&(0,B.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{mb:2,lineHeight:1.5,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:s.description}),(0,B.jsx)(l.A,{sx:{mt:"auto"},children:(0,B.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,B.jsx)(g.A,{label:"".concat(ne(s.name)," ").concat(e("navigation.laws")),size:"small",color:"primary",variant:"outlined",sx:{fontWeight:500}}),(0,B.jsx)(l.A,{sx:{width:20,height:20,borderRadius:"50%",backgroundColor:s.color||M.palette.primary.main,border:"2px solid ".concat(M.palette.background.paper),boxShadow:M.shadows[2]}})]})})]}),(0,B.jsx)(l.A,{sx:{p:2,backgroundColor:"dark"===M.palette.mode?"rgba(255, 255, 255, 0.03)":M.palette.grey[50],borderTop:"1px solid ".concat(M.palette.divider)},children:(0,B.jsxs)(c.A,{variant:"caption",color:"text.secondary",children:[e("common.createdAt"),": ",new Date(s.createdAt).toLocaleDateString("ar"===t.language?"ar-DZ":"fr"===t.language?"fr-FR":"en-US")]})})]})})},s.id))}),(0,B.jsxs)(j.A,{anchorEl:$,open:Boolean($),onClose:ie,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:[(0,B.jsxs)(y.A,{onClick:()=>oe("edit"),children:[(0,B.jsx)(I.A,{sx:{mr:1},fontSize:"small"}),e("common.edit")]}),(0,B.jsxs)(y.A,{onClick:()=>oe("delete"),sx:{color:"error.main"},children:[(0,B.jsx)(E.A,{sx:{mr:1},fontSize:"small"}),e("common.delete")]})]}),(0,B.jsxs)(v.A,{open:J,onClose:()=>Y(!1),maxWidth:"sm",fullWidth:!0,children:[(0,B.jsx)(f.A,{children:e("common.confirm")}),(0,B.jsxs)(b.A,{children:[(0,B.jsx)(c.A,{children:e("messages.confirmDelete")}),G&&(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{mt:1},children:G.name}),ne(G.name)>0&&(0,B.jsx)(p.A,{severity:"warning",sx:{mt:2},children:e("messages.categoryHasLaws",{count:ne(G.name)})})]})]}),(0,B.jsxs)(w.A,{children:[(0,B.jsx)(d.A,{onClick:()=>Y(!1),children:e("common.cancel")}),(0,B.jsx)(d.A,{onClick:async()=>{try{const t=ne(G.name);if(t>0)return X({open:!0,message:e("messages.categoryHasLaws",{count:t}),severity:"warning"}),void Y(!1);await O.deleteCategory(G.id),X({open:!0,message:e("messages.categoryDeleted"),severity:"success"}),Y(!1),K(null)}catch(D){X({open:!0,message:e("messages.networkError"),severity:"error"})}},color:"error",variant:"contained",children:e("common.delete")})]})]}),(0,B.jsx)(C.A,{open:Q.open,autoHideDuration:6e3,onClose:le,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,B.jsx)(p.A,{onClose:le,severity:Q.severity,sx:{width:"100%"},children:Q.message})})]})})}},2046:(e,t,s)=>{s.d(t,{A:()=>b});var n=s(98587),r=s(58168),a=s(9950),i=s(72004),o=s(88465),l=s(61676),c=s(82053),d=s(15866),h=s(39766),x=s(59254),m=s(1763),g=s(423);function p(e){return(0,g.Ay)("MuiInputAdornment",e)}const A=(0,m.A)("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var u,j=s(18463),y=s(44414);const v=["children","className","component","disablePointerEvents","disableTypography","position","variant"],f=(0,x.Ay)("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t["position".concat((0,l.A)(s.position))],!0===s.disablePointerEvents&&t.disablePointerEvents,t[s.variant]]}})(e=>{let{theme:t,ownerState:s}=e;return(0,r.A)({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(t.vars||t).palette.action.active},"filled"===s.variant&&{["&.".concat(A.positionStart,"&:not(.").concat(A.hiddenLabel,")")]:{marginTop:16}},"start"===s.position&&{marginRight:8},"end"===s.position&&{marginLeft:8},!0===s.disablePointerEvents&&{pointerEvents:"none"})}),b=a.forwardRef(function(e,t){const s=(0,j.b)({props:e,name:"MuiInputAdornment"}),{children:x,className:m,component:g="div",disablePointerEvents:A=!1,disableTypography:b=!1,position:w,variant:C}=s,S=(0,n.A)(s,v),k=(0,h.A)()||{};let z=C;C&&k.variant,k&&!z&&(z=k.variant);const I=(0,r.A)({},s,{hiddenLabel:k.hiddenLabel,size:k.size,disablePointerEvents:A,position:w,variant:z}),E=(e=>{const{classes:t,disablePointerEvents:s,hiddenLabel:n,position:r,size:a,variant:i}=e,c={root:["root",s&&"disablePointerEvents",r&&"position".concat((0,l.A)(r)),i,n&&"hiddenLabel",a&&"size".concat((0,l.A)(a))]};return(0,o.A)(c,p,t)})(I);return(0,y.jsx)(d.A.Provider,{value:null,children:(0,y.jsx)(f,(0,r.A)({as:g,ownerState:I,className:(0,i.A)(E.root,m),ref:t},S,{children:"string"!==typeof x||b?(0,y.jsxs)(a.Fragment,{children:["start"===w?u||(u=(0,y.jsx)("span",{className:"notranslate",children:"\u200b"})):null,x]}):(0,y.jsx)(c.A,{color:"text.secondary",children:x})}))})})},8079:(e,t,s)=>{s.d(t,{A:()=>S});var n=s(9950),r=s(16491),a=s(29925),i=s(2046),o=s(25333),l=s(57191),c=s(2235),d=s(249),h=s(26050),x=s(82053),m=s(14195),g=s(83563),p=s(25277),A=s(14857),u=s(31902),j=s(17972),y=s(33463),v=s(49715),f=s(76299),b=s(67818),w=s(387),C=s(44414);const S=function(e){let{value:t,onChange:s,placeholder:S,showSuggestions:k=!0,onSearch:z,fullWidth:I=!0,size:E="medium"}=e;const{t:L,i18n:W}=(0,b.Bd)(),H=(0,A.A)(),{laws:M,searchActions:P}=(0,w.Us)(),[F,T]=(0,n.useState)(!1),[D,O]=(0,n.useState)([]),[N,R]=(0,n.useState)([]),[V,B]=(0,n.useState)([]);(0,n.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("searchHistory")||"[]");R(e.slice(0,5));B(["\u0627\u0644\u0642\u0627\u0646\u0648\u0646 \u0627\u0644\u0645\u062f\u0646\u064a","\u0642\u0627\u0646\u0648\u0646 \u0627\u0644\u0639\u0642\u0648\u0628\u0627\u062a","\u0642\u0627\u0646\u0648\u0646 \u0627\u0644\u0623\u0633\u0631\u0629","\u0627\u0644\u0642\u0627\u0646\u0648\u0646 \u0627\u0644\u062a\u062c\u0627\u0631\u064a","\u0642\u0627\u0646\u0648\u0646 \u0627\u0644\u0639\u0645\u0644"])},[]),(0,n.useEffect)(()=>{t&&t.length>2&&M?U(t):O([])},[t,M]);const U=e=>{if(!M)return;const t=[],s=e.toLowerCase();M.forEach(n=>{n.title.toLowerCase().includes(s)&&t.push({type:"title",text:n.title,law:n,highlight:e})}),M.forEach(n=>{n.keywords&&n.keywords.forEach(r=>{r.toLowerCase().includes(s)&&!t.find(e=>e.text===r)&&t.push({type:"keyword",text:r,law:n,highlight:e})})}),M.forEach(n=>{n.officialNumber.toLowerCase().includes(s)&&t.push({type:"number",text:n.officialNumber,law:n,highlight:e})}),O(t.slice(0,8))},q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;if(e.trim()){const t=[e,...N.filter(t=>t!==e)].slice(0,10);R(t),localStorage.setItem("searchHistory",JSON.stringify(t)),z?z(e):P&&P.searchLaws(e),T(!1)}},_=e=>{s(e),q(e)},Z=(e,t)=>{if(!t)return e;return e.split(new RegExp("(".concat(t,")"),"gi")).map((e,s)=>e.toLowerCase()===t.toLowerCase()?(0,C.jsx)("span",{style:{backgroundColor:H.palette.primary.main+"30",fontWeight:600},children:e},s):e)},J=F&&k&&(D.length>0||N.length>0||!t&&V.length>0);return(0,C.jsxs)(r.A,{sx:{position:"relative",width:I?"100%":"auto"},children:[(0,C.jsx)(a.A,{fullWidth:I,size:E,value:t,onChange:e=>{const t=e.target.value;s(t)},onFocus:()=>T(!0),onBlur:()=>setTimeout(()=>T(!1),200),onKeyPress:e=>{"Enter"===e.key&&q()},placeholder:S||L("\u0623\u062f\u062e\u0644 \u0643\u0644\u0645\u0627\u062a \u0644\u0644\u0628\u062d\u062b"),InputProps:{startAdornment:(0,C.jsx)(i.A,{position:"ar"===W.language?"end":"start",children:(0,C.jsx)(v.A,{color:"action"})}),endAdornment:t&&(0,C.jsx)(i.A,{position:"ar"===W.language?"start":"end",children:(0,C.jsx)(o.A,{size:"small",onClick:()=>{s(""),O([])},edge:"ar"===W.language?"start":"end",children:(0,C.jsx)(u.A,{})})}),sx:{borderRadius:3,"& .MuiOutlinedInput-notchedOutline":{borderColor:H.palette.divider},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:H.palette.primary.main},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:H.palette.primary.main,borderWidth:2}}}}),J&&(0,C.jsx)(l.A,{in:!0,timeout:200,children:(0,C.jsx)(c.A,{sx:{position:"absolute",top:"100%",left:0,right:0,zIndex:1300,maxHeight:400,overflow:"auto",mt:1,boxShadow:H.shadows[8],border:"1px solid ".concat(H.palette.divider)},children:(0,C.jsxs)(d.A,{dense:!0,children:[D.length>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h.Ay,{children:(0,C.jsx)(x.A,{variant:"subtitle2",color:"text.secondary",sx:{fontWeight:600},children:L("search.suggestions")})}),D.map((e,t)=>(0,C.jsxs)(h.Ay,{button:!0,onClick:()=>(e=>{s(e.text),q(e.text)})(e),sx:{"&:hover":{backgroundColor:H.palette.action.hover}},children:[(0,C.jsxs)(m.A,{sx:{minWidth:40},children:["title"===e.type&&(0,C.jsx)(j.A,{color:"primary"}),"keyword"===e.type&&(0,C.jsx)(v.A,{color:"secondary"}),"number"===e.type&&(0,C.jsx)(f.A,{color:"info"})]}),(0,C.jsx)(g.A,{primary:Z(e.text,e.highlight),secondary:"title"===e.type?e.law.category:null,primaryTypographyProps:{sx:{fontSize:"0.9rem"}},secondaryTypographyProps:{sx:{fontSize:"0.8rem"}}}),(0,C.jsx)(p.A,{label:L("search.types.".concat(e.type)),size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20}})]},t))]}),!t&&N.length>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h.Ay,{children:(0,C.jsx)(x.A,{variant:"subtitle2",color:"text.secondary",sx:{fontWeight:600},children:L("search.recentSearches")})}),N.map((e,t)=>(0,C.jsxs)(h.Ay,{button:!0,onClick:()=>_(e),sx:{"&:hover":{backgroundColor:H.palette.action.hover}},children:[(0,C.jsx)(m.A,{sx:{minWidth:40},children:(0,C.jsx)(y.A,{color:"action"})}),(0,C.jsx)(g.A,{primary:e,primaryTypographyProps:{sx:{fontSize:"0.9rem"}}})]},t))]}),!t&&0===D.length&&V.length>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(h.Ay,{children:(0,C.jsx)(x.A,{variant:"subtitle2",color:"text.secondary",sx:{fontWeight:600},children:L("search.popularSearches")})}),V.map((e,t)=>(0,C.jsxs)(h.Ay,{button:!0,onClick:()=>_(e),sx:{"&:hover":{backgroundColor:H.palette.action.hover}},children:[(0,C.jsx)(m.A,{sx:{minWidth:40},children:(0,C.jsx)(f.A,{color:"success"})}),(0,C.jsx)(g.A,{primary:e,primaryTypographyProps:{sx:{fontSize:"0.9rem"}}})]},t))]}),t&&0===D.length&&(0,C.jsx)(h.Ay,{children:(0,C.jsx)(g.A,{primary:L("search.noSuggestions"),primaryTypographyProps:{sx:{textAlign:"center",color:"text.secondary",fontSize:"0.9rem"}}})})]})})})]})}},14801:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack")},20760:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},31902:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},33463:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History")},40379:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},41300:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette")},49885:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"}),"Cancel")},53256:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add")},58629:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description")},72934:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save")},76281:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},76299:(e,t,s)=>{s.d(t,{A:()=>a});var n=s(65471),r=s(44414);const a=(0,n.A)((0,r.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp")}}]);